# Release-5.2.0 (ongoing)

## <mark style="color:blue;">5.2.0</mark> (12-09-2022)

Discussion thread: [https://github.com/Sunbird-Knowlg/Community/discussions/76](https://github.com/Sunbird-Knowlg/Community/discussions/76)

|                | Start date   | End date     |
| -------------- | ------------ | ------------ |
| Planning phase | 12 Sept 2022 | 23 Sept 2022 |
| Sprint 1       | 26 Sept 2022 | 14 Oct 2022  |
| Sprint 2       | 17 Oct 2022  | 4 Nov 2022   |
| PPV            | 7 Nov 2022   | 18 Nov 2022  |
| Prod           | 21 Nov 2022  |              |

### Features

* Angular version upgrade&#x20;
  * PDF Player (12 to 14 with IVY) #[KN-316](https://project-sunbird.atlassian.net/browse/KN-316)
  * Video, Epub Players(9 to 12) #[KN-523](https://project-sunbird.atlassian.net/browse/KN-523)
* One step installation of Knowledge-Platform [#KN-585](https://project-sunbird.atlassian.net/browse/KN-585)
* Design: Separation of question-set & Collection-Editor [#KN-8](https://project-sunbird.atlassian.net/browse/KN-8)
* CSP - Knowlg microservices should be cloud agnostic [#KN-603](https://project-sunbird.atlassian.net/browse/KN-603)
* CSP - GCP video streaming interface(Slipped - Pushing as hot-fix of release-5.2.0) [#KN-549](https://project-sunbird.atlassian.net/browse/KN-549)

#### &#x20;(Adopter should integrate)

* Player: Published as web-component for ease of integration which is framework agnostic
  * Video/Youtube Player #[KN-517](https://project-sunbird.atlassian.net/browse/KN-517)
  * EPUB Player #[KN-517](https://project-sunbird.atlassian.net/browse/KN-517)
  * PDF player #[KN-304](https://project-sunbird.atlassian.net/browse/KN-304)

### Bug

* Properties with underscore are getting omitted from context data search#[KN-546](https://project-sunbird.atlassian.net/browse/KN-546) (It will go has hot fix)
* Unable to release dial codes from collection[#KN-547](https://project-sunbird.atlassian.net/browse/KN-547)

#### Default values for config

default config for [flink-jobs](https://github.com/project-sunbird/sunbird-learning-platform/blob/92604bb70357cea083a879f818a5c6b30bebbaeb/kubernetes/ansible/roles/flink-jobs-deploy/defaults/main.yml#L399) and [services](https://github.com/project-sunbird/sunbird-devops/blob/cc90889f2d13c4385a1cef0bfefbeec30e71406e/ansible/roles/stack-sunbird/defaults/main.yml#L1052)

```
cloudstorage_relative_path_prefix_content: "CONTENT_STORAGE_BASE_PATH"
cloudstorage_relative_path_prefix_dial: "DIAL_STORAGE_BASE_PATH"
cloudstorage_metadata_list: '["appIcon","posterImage","artifactUrl","downloadUrl","variants","previewUrl","pdfUrl", "streamingUrl", "toc_url"]
```

Please define below variables

```
cloudstorage_replace_absolute_path: 'true'
cloudstorage_base_path: "https://sunbirddevbbpublic.blob.core.windows.net"
valid_cloudstorage_base_urls: '["https://sunbirddevbbpublic.blob.core.windows.net"]'
```

#### <mark style="color:red;">Deprecated variables</mark>

* <mark style="color:red;">sunbird\_cloud\_storage\_type</mark>
* <mark style="color:red;">sunbird\_public\_storage\_account\_name</mark>
* <mark style="color:red;">sunbird\_public\_storage\_account\_key</mark>
* <mark style="color:red;">azure\_public\_container</mark>
* <mark style="color:red;">sunbird\_content\_azure\_storage\_container</mark>

| Component                 | Build Job                                                  | Build Tag                                                                                                                | Deploy Job                                                               | Deployment Tag                                                                                             | Comment                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| ------------------------- | ---------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Schema upload             | NA                                                         | NA                                                                                                                       | Deploy/Kubernetes/UploadSchema                                           | [release-5.2.0\_RC2](https://github.com/project-sunbird/knowledge-platform/tree/release-5.2.0\_RC2)        | Deploy this before deploying the service and flink-jobs.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Kafka setup               | Deploy/KnowledgePlatform/KafkaSetup                        | NA                                                                                                                       |                                                                          | [release-5.2.0\_RC3](https://github.com/project-sunbird/sunbird-learning-platform/tree/release-5.2.0\_RC3) | Deploy this before deploying flink-jobs.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Sync Tool                 | Build/KnowledgePlatform/SyncTool                           | [release-5.2.0\_RC5](https://github.com/project-sunbird/sunbird-learning-platform/tree/release-5.2.0\_RC5)               |                                                                          | NA                                                                                                         | **migratecspdata** - **** Add this command to the command list in the Deploy/KnowledgePlatform/Neo4jElasticSearchSyncTool Jenkins job.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Knowledge-platform        | <p>Build/Core/Content</p><p></p><p>Build/Core/Taxonomy</p> | [release-5.2.0\_RC2](https://github.com/project-sunbird/knowledge-platform/tree/release-5.2.0\_RC2)                      | <p>Deploy/Kubernetes/Content</p><p></p><p>Deploy/Kubernetes/Taxonomy</p> | [release-5.1.0\_RC2](https://github.com/project-sunbird/sunbird-devops/tree/release-5.1.0\_RC2)            | Build and deploy the content-service and taxonomy-service. Please find the configuration changes [here](https://knowlg.sunbird.org/use/release-notes/release-5.2.0-ongoing#configurations).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Sunbird-learning-service  | Build/KnowledgePlatform/Learning                           | [release-5.2.0\_RC5](https://github.com/project-sunbird/sunbird-learning-platform/tree/release-5.2.0\_RC5)               |                                                                          | [release-5.2.0\_RC5](https://github.com/project-sunbird/sunbird-learning-platform/tree/release-5.2.0\_RC5) |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| dial-service              | Build/Core/Dial                                            | [release-5.2.0\_RC1](https://github.com/project-sunbird/sunbird-dial-service/tree/release-5.2.0\_RC1)                    | Deploy/Kubernetes/Dial                                                   | [release-5.1.0\_RC2](https://github.com/project-sunbird/sunbird-devops/tree/release-5.1.0\_RC2)            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Onboard APIs              | NA                                                         | NA                                                                                                                       | Deploy/Kubernetes/OnboardAPIs                                            | [release-5.1.0\_RC2](https://github.com/project-sunbird/sunbird-devops/tree/release-5.1.0\_RC2)            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Knowledge-mw-service      | Build/Core/KnowledgeMW                                     | [release-5.2.0\_RC1](https://github.com/project-sunbird/knowledge-mw-service/tree/release-5.2.0\_RC1)                    | Deploy/Kubernetes/KnowledgeMW                                            | [release-5.1.0\_RC2](https://github.com/project-sunbird/sunbird-devops/tree/release-5.1.0\_RC2)            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Knowledge-platform-jobs   | Build/KnowledgePlatform/FlinkJobs                          | [release-5.2.0\_RC7](https://github.com/project-sunbird/knowledge-platform-jobs/tree/release-5.2.0\_RC7)                 |                                                                          | [release-5.2.0\_RC6](https://github.com/project-sunbird/sunbird-learning-platform/tree/release-5.2.0\_RC6) | <p>Add the below job list to the <em>job_names_to_deploy</em> list in the Deploy/KnowledgePlatform/FlinkJobs jenkins job</p><p><strong>csp-migrator,</strong> </p><p><strong>live-node-publisher,</strong> </p><p><strong>live-video-stream-generator,</strong> </p><p><strong>cassandra-data-migration</strong> </p><p></p><p>Deploy the </p><p><strong>assessment-enrichment</strong>, </p><p><strong>content-publish</strong>, </p><p><strong>qrcode-image-generator</strong>, <strong>search-indexer</strong>, </p><p><strong>csp-migrator,</strong> </p><p><strong>live-node-publisher,</strong> </p><p><strong>live-video-stream-generator,</strong> </p><p><strong>cassandra-data-migration</strong> flink jobs. </p><p></p><p>Please find the configuration changes <a href="https://knowlg.sunbird.org/use/release-notes/release-5.2.0-ongoing#configurations">here</a>. </p> |
| Sunbird-Collection-Editor | NA                                                         | [**v5.2.4**](https://www.npmjs.com/package/@project-sunbird/sunbird-collection-editor/v/5.2.4)****                       |                                                                          | NA                                                                                                         | NA                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Sunbird-Content-Editor    | Build/Plugins/ContentEditor                                | [**release-5.2.0\_RC1**](https://github.com/project-sunbird/sunbird-content-editor/releases/tag/release-5.2.0\_RC1)****  |                                                                          | [release-5.1.0\_RC2](https://github.com/project-sunbird/sunbird-devops/tree/release-5.1.0\_RC2)            | NA                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Sunbird-Generic-Editor    | Build/Plugins/GenericEditor                                | [**release-5.2.0\_RC1**](https://github.com/project-sunbird/sunbird-generic-editor/releases/tag/release-5.2.0\_RC1)      |                                                                          | [release-5.1.0\_RC2](https://github.com/project-sunbird/sunbird-devops/tree/release-5.1.0\_RC2)            | NA                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Sunbird-content-plugins   | Build/Plugins/ContentPlugins                               | [**release-5.2.0\_RC1**](https://github.com/project-sunbird/sunbird-content-plugins/releases/tag/release-5.2.0\_RC1)**** |                                                                          | [release-5.1.0\_RC2](https://github.com/project-sunbird/sunbird-devops/tree/release-5.1.0\_RC2)            | NA                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Sunbird-pdf-player        | NA                                                         | ****[**v5.2.1**](https://www.npmjs.com/package/@project-sunbird/sunbird-pdf-player-v9/v/5.2.1)****                       |                                                                          | NA                                                                                                         | Upgraded to Angular 14 (from Angular 9)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Sunbird-video-player      | NA                                                         | ****[**v5.2.3**](https://www.npmjs.com/package/@project-sunbird/sunbird-video-player-v9/v/5.2.3)****                     |                                                                          | NA                                                                                                         | <p>Upgraded to Angular 12<br>(from Angular 9)</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Sunbird-epub-player       | NA                                                         | ****[**v.5.2.1**](https://www.npmjs.com/package/@project-sunbird/sunbird-epub-player-v9/v/5.2.1)****                     |                                                                          | NA                                                                                                         | <p>Upgraded to Angular 12<br>(from Angular 9)</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |

### Configurations

| Service/Jobs                                                                                                                                                                                             | Old Configuration                                                                                                                                                                                                                                                                    | New Configuration                                                                                                                                                                                                                                                                                                                                     |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [content-service](https://github.com/project-sunbird/sunbird-devops/blob/3ed1a90d8b8eed09666468194fcac2a655c05c96/ansible/roles/stack-sunbird/templates/content-service\_application.conf#L485)          | <p>cloud_storage_type: "{{ sunbird_cloud_storage_type }}" azure_storage_key: "{{ sunbird_public_storage_account_name }}" </p><p>azure_storage_secret: "{{ sunbird_public_storage_account_key }}" </p><p>azure_storage_container: "{{ sunbird_content_azure_storage_container }}"</p> | cloud\_storage\_type: "\{{ cloud\_service\_provider \}}" cloud\_storage\_key: "\{{ cloud\_public\_storage\_accountname \}}" cloud\_storage\_secret: "\{{ cloud\_public\_storage\_secret \}}" cloud\_storage\_endpoint: "\{{ cloud\_public\_storage\_endpoint \}}" cloud\_storage\_container: "\{{ cloud\_storage\_content\_bucketname \}}"            |
| [content-service](https://github.com/project-sunbird/sunbird-devops/blob/3ed1a90d8b8eed09666468194fcac2a655c05c96/ansible/roles/stack-sunbird/templates/content-service\_application.conf#L643)          |                                                                                                                                                                                                                                                                                      | <p>cloudstorage { metadata.replace_absolute_path={{ cloudstorage_replace_absolute_path | default('false') }} relative_path_prefix={{ cloudstorage_relative_path_prefix_content }} </p><p>metadata.list={{ cloudstorage_metadata_list }} read_base_path="{{ cloudstorage_base_path }}" write_base_path={{ valid_cloudstorage_base_urls }} </p><p>}</p> |
| [taxonomy-service](https://github.com/project-sunbird/sunbird-devops/blob/3ed1a90d8b8eed09666468194fcac2a655c05c96/ansible/roles/stack-sunbird/templates/taxonomy-service\_application.conf#L368)        | <p>cloud_storage_type: "azure" azure_storage_key: "{{ sunbird_public_storage_account_name }}" </p><p>azure_storage_secret: "{{ sunbird_public_storage_account_key }}" </p><p>azure_storage_container: "{{ sunbird_content_azure_storage_container }}"</p>                            | <p>cloud_storage_type: "{{ cloud_service_provider }}" cloud_storage_key: "{{ cloud_public_storage_accountname }}" </p><p>cloud_storage_secret: "{{ cloud_public_storage_secret }}" cloud_storage_endpoint: "{{ cloud_public_storage_endpoint }}" cloud_storage_container: "{{ cloud_storage_content_bucketname }}"</p>                                |
| [taxonomy-service](https://github.com/project-sunbird/sunbird-devops/blob/3ed1a90d8b8eed09666468194fcac2a655c05c96/ansible/roles/stack-sunbird/templates/taxonomy-service\_application.conf#L402)        |                                                                                                                                                                                                                                                                                      | <p>cloudstorage { metadata.replace_absolute_path={{ cloudstorage_replace_absolute_path | default('false') }} relative_path_prefix={{ cloudstorage_relative_path_prefix_content }} </p><p>metadata.list={{ cloudstorage_metadata_list }} read_base_path="{{ cloudstorage_base_path }}" write_base_path={{ valid_cloudstorage_base_urls }} </p><p>}</p> |
| [asset-enrichment flink job](https://github.com/project-sunbird/sunbird-learning-platform/blob/92604bb70357cea083a879f818a5c6b30bebbaeb/kubernetes/helm\_charts/datapipeline\_jobs/values.j2#L318)       | <p>cloud_storage_type="{{ cloud_store }}" </p><p>azure_storage_key="{{ sunbird_public_storage_account_name }}" </p><p>azure_storage_secret="{{ sunbird_public_storage_account_key }}" </p><p>azure_storage_container="{{ azure_public_container }}"</p>                              | cloud\_storage\_type: "\{{ cloud\_service\_provider \}}" cloud\_storage\_key: "\{{ cloud\_public\_storage\_accountname \}}" cloud\_storage\_secret: "\{{ cloud\_public\_storage\_secret \}}" cloud\_storage\_endpoint: "\{{ cloud\_public\_storage\_endpoint \}}" cloud\_storage\_container: "\{{ cloud\_storage\_content\_bucketname \}}"            |
| [asset-enrichment flink job](https://github.com/project-sunbird/sunbird-learning-platform/blob/92604bb70357cea083a879f818a5c6b30bebbaeb/kubernetes/helm\_charts/datapipeline\_jobs/values.j2#L323)       |                                                                                                                                                                                                                                                                                      | <p>cloudstorage { metadata.replace_absolute_path={{ cloudstorage_replace_absolute_path | default('false') }} relative_path_prefix={{ cloudstorage_relative_path_prefix_content }} </p><p>metadata.list={{ cloudstorage_metadata_list }} read_base_path="{{ cloudstorage_base_path }}" write_base_path={{ valid_cloudstorage_base_urls }} </p><p>}</p> |
| [content-publish flink job](https://github.com/project-sunbird/sunbird-learning-platform/blob/92604bb70357cea083a879f818a5c6b30bebbaeb/kubernetes/helm\_charts/datapipeline\_jobs/values.j2#L622)        | <p>cloud_storage_type="{{ cloud_store }}" </p><p>azure_storage_key="{{ sunbird_public_storage_account_name }}" </p><p>azure_storage_secret="{{ sunbird_public_storage_account_key }}" </p><p>azure_storage_container="{{ azure_public_container }}"</p>                              | cloud\_storage\_type: "\{{ cloud\_service\_provider \}}" cloud\_storage\_key: "\{{ cloud\_public\_storage\_accountname \}}" cloud\_storage\_secret: "\{{ cloud\_public\_storage\_secret \}}" cloud\_storage\_endpoint: "\{{ cloud\_public\_storage\_endpoint \}}" cloud\_storage\_container: "\{{ cloud\_storage\_content\_bucketname \}}"            |
| [content-publish flink job](https://github.com/project-sunbird/sunbird-learning-platform/blob/92604bb70357cea083a879f818a5c6b30bebbaeb/kubernetes/helm\_charts/datapipeline\_jobs/values.j2#L627)        |                                                                                                                                                                                                                                                                                      | <p>cloudstorage { metadata.replace_absolute_path={{ cloudstorage_replace_absolute_path | default('false') }} relative_path_prefix={{ cloudstorage_relative_path_prefix_content }} </p><p>metadata.list={{ cloudstorage_metadata_list }} read_base_path="{{ cloudstorage_base_path }}" write_base_path={{ valid_cloudstorage_base_urls }} </p><p>}</p> |
| [qrcode-image-generator flink job](https://github.com/project-sunbird/sunbird-learning-platform/blob/92604bb70357cea083a879f818a5c6b30bebbaeb/kubernetes/helm\_charts/datapipeline\_jobs/values.j2#L679) | <p>cloud_storage_type="{{ cloud_store }}" </p><p>azure_storage_key="{{ sunbird_public_storage_account_name }}" </p><p>azure_storage_secret="{{ sunbird_public_storage_account_key }}" </p><p>azure_storage_container="{{ azure_public_container }}"</p>                              | <p>cloud_storage_type="{{ cloud_service_provider }}" cloud_storage_key="{{ cloud_public_storage_accountname }}" </p><p>cloud_storage_secret="{{ cloud_public_storage_secret }}" cloud_storage_container="{{ cloud_storage_dial_bucketname | default("dial") }}"</p>                                                                                   |
| [qrcode-image-generator flink job](https://github.com/project-sunbird/sunbird-learning-platform/blob/92604bb70357cea083a879f818a5c6b30bebbaeb/kubernetes/helm\_charts/datapipeline\_jobs/values.j2#L671) |                                                                                                                                                                                                                                                                                      | <p>cloudstorage { metadata.replace_absolute_path={{ cloudstorage_replace_absolute_path | default('false') }} relative_path_prefix={{ cloudstorage_relative_path_prefix_dial }} </p><p>metadata.list={{ cloudstorage_metadata_list }} read_base_path="{{ cloudstorage_base_path }}" write_base_path={{ valid_cloudstorage_base_urls }} </p><p>}</p>    |
| [search-indexer flink job](https://github.com/project-sunbird/sunbird-learning-platform/blob/92604bb70357cea083a879f818a5c6b30bebbaeb/kubernetes/helm\_charts/datapipeline\_jobs/values.j2#L269)         |                                                                                                                                                                                                                                                                                      | <p>cloudstorage { metadata.replace_absolute_path={{ cloudstorage_replace_absolute_path | default('false') }} relative_path_prefix={{ cloudstorage_relative_path_prefix_content }} </p><p>metadata.list={{ cloudstorage_metadata_list }} read_base_path="{{ cloudstorage_base_path }}" </p><p>}</p>                                                    |



**New Flink Jobs:**

* [csp-migrator](https://knowlg.sunbird.org/learn/product-and-developer-guide/knowlg-jobs/configuration#csp-migrator)
* [live-node-publisher](https://knowlg.sunbird.org/learn/product-and-developer-guide/knowlg-jobs/configuration#live-node-publisher)
* [live-video-stream-generator](https://knowlg.sunbird.org/learn/product-and-developer-guide/knowlg-jobs/configuration#live-video-stream-generator)
* [cassandra-data-migration](https://knowlg.sunbird.org/learn/product-and-developer-guide/knowlg-jobs/configuration#cassandra-data-migration)

### Migration process:

refer [data-migration.md](../../learn/product-and-developer-guide/other/data-migration.md "mention") page for more details.



